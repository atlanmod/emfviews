<?xml version="1.0" encoding="UTF-8"?>
<project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://maven.apache.org/POM/4.0.0"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>fr.inria.atlanmod.emfviews</groupId>
    <artifactId>emfviews</artifactId>
    <version>0.3.0-SNAPSHOT</version>
  </parent>

  <artifactId>dsls</artifactId>

  <packaging>pom</packaging>

  <modules>
    <module>mel</module>
    <module>vpdl</module>
  </modules>

  <properties>
    <xtext-version>2.13.0</xtext-version>
  </properties>

  <repositories>
    <repository>
      <id>Xtext Update Site</id>
      <layout>p2</layout>
      <url>http://download.eclipse.org/modeling/tmf/xtext/updates/releases/${xtext-version}/</url>
    </repository>

    <!-- <repositories> -->
    <!--   <repository> -->
    <!--     <id>ATL</id> -->
    <!--     <layout>p2</layout> -->
    <!--     <url>http://download.eclipse.org/mmt/atl/updates/releases/3.8</url> -->
    <!--   </repository> -->
    <!-- </repositories> -->
  </repositories>

  <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.eclipse.xtend</groupId>
          <artifactId>xtend-maven-plugin</artifactId>
          <version>${xtext-version}</version>
          <executions>
            <execution>
              <goals>
                <goal>compile</goal>
                <goal>xtend-install-debug-info</goal>
                <goal>testCompile</goal>
                <goal>xtend-test-install-debug-info</goal>
              </goals>
            </execution>
          </executions>
          <configuration>
            <outputDirectory>xtend-gen</outputDirectory>
          </configuration>
        </plugin>

        <plugin>
	  <groupId>org.apache.maven.plugins</groupId>
	  <artifactId>maven-clean-plugin</artifactId>
	  <version>3.0.0</version>
	  <executions>
	    <execution>
	      <id>gen-clean</id>
	      <goals>
		<goal>clean</goal>
	      </goals>
	      <configuration>
		<filesets>
		  <fileset>
		    <directory>${basedir}/xtend-gen</directory>
                    <includes>
	              <include>**/*</include>
	            </includes>
		  </fileset>
		</filesets>
	      </configuration>
	    </execution>
	  </executions>
	</plugin>
      </plugins>
    </pluginManagement>
  </build>

</project>
